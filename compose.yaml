services:
  server:
    build:
      context: .
    environment:
      NODE_ENV: production
    ports:
      - 3000:3000
  kafka:
    image: apache/kafka
    container_name: kafka
    ports:
      - '9092:9092'
  userService:
    build:
      dockerfile: Dockerfile
      context: ./UserService
    container_name: userService
    ports: -'8001:8001'

  taskService:
    build:
      dockerfile: Dockerfile
      context: ./TaskService
    container_name: taskService
    ports: -'8002:8002'

  nginx-proxy:
    build: Dockerfile
    context: ./proxy
    ports:
      - 80:80
    depends_on:
      - userService
      - taskService
